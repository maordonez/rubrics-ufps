(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{ExZ1:function(e,t,s){"use strict";s.r(t),s.d(t,"UserModule",(function(){return v}));var r=s("ofXK"),i=s("PCNd"),a=s("vvyD"),o=s("AytR"),c=s("tott"),n=s("s6Xw"),u=s("fXoL");let p=(()=>{class e{constructor(e,t){this._apiRequestService=e,this._utilRequestService=t,this.appResource=o.a.app,this.path="users/request"}get(){return this._utilRequestService.convertObserver(this._apiRequestService.get(this.appResource,this.path))}accept(e){const t={headerParams:{"Auxiliary-Parameter":String(e)}};return this._utilRequestService.convertObserver(this._apiRequestService.put(this.appResource,this.path,{status:1},t))}discard(e){const t={headerParams:{"Auxiliary-Parameter":String(e)}};return this._utilRequestService.convertObserver(this._apiRequestService.put(this.appResource,this.path,{status:3},t))}}return e.\u0275fac=function(t){return new(t||e)(u.Yb(c.a),u.Yb(n.a))},e.\u0275prov=u.Kb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var d=s("0IaG"),h=s("5eHb"),l=s("tyNb"),b=s("tgey"),g=s("Wp6s"),R=s("hGDI");const f=function(){return[5,10,20]},m=[{path:"",component:(()=>{class e{constructor(e,t,s,r,i){this._dialog=e,this._toastr=t,this._router=s,this._userRequestService=r,this._datePipe=i,this.status=o.a.status,this.isLoading=!0}ngOnInit(){this.loadConfigTable(),this.loadUserRequests()}get total(){return this.userRequests.length}loadConfigTable(){this.columns=[{header:"Fecha",field:"created_at",formatter:e=>this._datePipe.transform(e.created_at,"yyyy-dd-MM H:mm")},{header:"Codigo",field:"code",sortable:!0},{header:"Nombre",field:"name",sortable:!0},{header:"Correo",field:"email",sortable:!0},{header:"Opciones",field:"option",width:"120px",pinned:"right",type:"button",buttons:[{icon:"check_circle",tooltip:"Autorizar",type:"icon",pop:!0,popTitle:"Desea autorizar la solicitud?",click:e=>this.acceptRequest(e)},{icon:"clear",color:"warn",tooltip:"Rechazar",pop:!0,popTitle:"Desea rechazar la solicitud?",type:"icon",click:e=>this.discardRequest(e)}]}]}loadUserRequests(){this.userRequests=[],this.isLoading=!0,this._userRequestService.get().subscribe(e=>{e.status?(Array.isArray(e.data)&&(this.userRequests=e.data),this.isLoading=!1):this.isLoading=!1})}acceptRequest(e){const{id:t}=e;this._userRequestService.accept(t).subscribe(e=>{const t=e.message;e.status?(this._toastr.success(t),this.loadUserRequests()):this._toastr.error(t)})}discardRequest(e){const{id:t}=e;this._userRequestService.discard(t).subscribe(e=>{const t=e.message;e.status?(this._toastr.success(t),this.loadUserRequests()):this._toastr.error(t)})}}return e.\u0275fac=function(t){return new(t||e)(u.Ob(d.c),u.Ob(h.b),u.Ob(l.f),u.Ob(p),u.Ob(r.f))},e.\u0275cmp=u.Ib({type:e,selectors:[["app-user-request"]],decls:6,vars:9,consts:[[3,"data","columns","length","loading","pageOnFront","pageIndex","pageSize","pageSizeOptions"]],template:function(e,t){1&e&&(u.Pb(0,"page-header"),u.Ub(1,"mat-card"),u.Ub(2,"mat-card-title"),u.Nc(3,"Solicitudes de autorizacion de rol"),u.Tb(),u.Pb(4,"b"),u.Pb(5,"mtx-grid",0),u.Tb()),2&e&&(u.Cb(5),u.oc("data",t.userRequests)("columns",t.columns)("length",t.total)("loading",t.isLoading)("pageOnFront",!0)("pageIndex",0)("pageSize",5)("pageSizeOptions",u.qc(8,f)))},directives:[b.a,g.a,g.c,R.a],encapsulation:2}),e})()}];let q=(()=>{class e{}return e.\u0275mod=u.Mb({type:e}),e.\u0275inj=u.Lb({factory:function(t){return new(t||e)},imports:[[l.j.forChild(m)],l.j]}),e})(),v=(()=>{class e{}return e.\u0275mod=u.Mb({type:e}),e.\u0275inj=u.Lb({factory:function(t){return new(t||e)},providers:[r.f],imports:[[i.a,a.a,q]]}),e})()}}]);