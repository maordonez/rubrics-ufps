(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{bw5h:function(t,e,a){"use strict";a.r(e),a.d(e,"CategoryModule",(function(){return L}));var i=a("ofXK"),o=a("3Pt+"),r=a("PCNd"),s=a("vvyD"),c=a("0IaG"),n=a("IRVD"),d=a("AytR"),l=a("fXoL"),b=a("5eHb"),u=a("kmnG"),m=a("qFsG"),p=a("C/6R"),g=a("bTqV"),f=a("d3UM"),h=a("FKr1");const v=["reactiveFormView"];function y(t,e){1&t&&(l.Ub(0,"mat-error"),l.Nc(1," El campo es requerido "),l.Tb())}function C(t,e){1&t&&(l.Ub(0,"mat-error"),l.Nc(1," El campo es requerido "),l.Tb())}function w(t,e){if(1&t&&(l.Ub(0,"mat-option",12),l.Nc(1),l.Tb()),2&t){const t=e.$implicit;l.oc("value",e.index),l.Cb(1),l.Oc(t)}}function F(t,e){1&t&&(l.Ub(0,"mat-error"),l.Nc(1," El campo es requerido "),l.Tb())}function T(t,e){if(1&t&&(l.Ub(0,"mat-form-field"),l.Ub(1,"mat-label"),l.Nc(2,"Estado"),l.Tb(),l.Ub(3,"mat-select",10),l.Ub(4,"mat-option"),l.Nc(5,"-- None --"),l.Tb(),l.Lc(6,w,2,2,"mat-option",11),l.Tb(),l.Lc(7,F,2,0,"mat-error",5),l.Tb()),2&t){const t=l.fc();l.Cb(6),l.oc("ngForOf",t.listStatus),l.Cb(1),l.oc("ngIf",t.reactiveForm.get("status").invalid)}}let N=(()=>{class t{constructor(t,e,a,i,o){this.dialogRef=t,this.fb=e,this._toastr=a,this._categoryService=i,this.data=o,this.listStatus=d.a.status}ngOnInit(){this.reactiveForm=this.fb.group({id:[""],name:["",[o.y.required]],description:["",[o.y.required]],status:[""]}),this.data.update&&this.reactiveForm.patchValue(this.data.category)}ngOnDestroy(){}onSubmitReactiveForm(){if(this.reactiveForm.invalid)return void this._toastr.error("Diligencie todos los campos");const{id:t,name:e,description:a,status:i}=this.reactiveForm.getRawValue();this.data.update?this._categoryService.update(t,{name:e,description:a,status:i}).subscribe(t=>{t.status?(this._toastr.success(t.message),this.dialogRef.close({status:!0})):this._toastr.error(t.message)}):this._categoryService.register({name:e,description:a}).subscribe(t=>{t.status?(this._toastr.success(t.message),this.dialogRef.close({status:!0})):this._toastr.error(t.message)})}onClickClose(){this.dialogRef.close(!1)}onClickSave(){this.reactiveFormView.ngSubmit.emit()}}return t.\u0275fac=function(e){return new(e||t)(l.Ob(c.i),l.Ob(o.g),l.Ob(b.b),l.Ob(n.a),l.Ob(c.a))},t.\u0275cmp=l.Ib({type:t,selectors:[["app-category-dialog"]],viewQuery:function(t,e){var a;1&t&&l.Rc(v,!0),2&t&&l.wc(a=l.cc())&&(e.reactiveFormView=a.first)},decls:21,vars:4,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"form-field-full",3,"formGroup","ngSubmit"],["reactiveFormView","ngForm"],["matInput","","uppercase","","placeholder","Ingrese el nombre de la categoria","formControlName","name","required",""],[4,"ngIf"],["matInput","","uppercase","","placeholder","Ingrese una descripcion para la categoria","formControlName","description","required",""],["mat-dialog-actions","","align","end"],["mat-button","","color","warn",3,"click"],["mat-button","","cdkFocusInitial","","color","primary",3,"click"],["required","","formControlName","status","required",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,e){1&t&&(l.Ub(0,"h1",0),l.Nc(1,"Administrar categorias"),l.Tb(),l.Ub(2,"div",1),l.Ub(3,"form",2,3),l.bc("ngSubmit",(function(){return e.onSubmitReactiveForm()})),l.Ub(5,"mat-form-field"),l.Ub(6,"mat-label"),l.Nc(7,"Nombre"),l.Tb(),l.Pb(8,"input",4),l.Lc(9,y,2,0,"mat-error",5),l.Tb(),l.Ub(10,"mat-form-field"),l.Ub(11,"mat-label"),l.Nc(12,"Descripcion"),l.Tb(),l.Pb(13,"textarea",6),l.Lc(14,C,2,0,"mat-error",5),l.Tb(),l.Lc(15,T,8,2,"mat-form-field",5),l.Tb(),l.Tb(),l.Ub(16,"div",7),l.Ub(17,"button",8),l.bc("click",(function(){return e.onClickClose()})),l.Nc(18,"Cancelar"),l.Tb(),l.Ub(19,"button",9),l.bc("click",(function(){return e.onClickSave()})),l.Nc(20,"Guardar"),l.Tb(),l.Tb()),2&t&&(l.Cb(3),l.oc("formGroup",e.reactiveForm),l.Cb(6),l.oc("ngIf",e.reactiveForm.get("name").invalid),l.Cb(5),l.oc("ngIf",e.reactiveForm.get("description").invalid),l.Cb(1),l.oc("ngIf",e.data.update))},directives:[c.j,c.g,o.z,o.s,o.l,u.c,u.g,m.b,o.d,p.a,o.r,o.j,o.x,i.n,c.d,g.b,u.b,f.a,h.p,i.m],encapsulation:2}),t})();var U=a("tyNb"),O=a("tgey"),_=a("Wp6s"),I=a("NFeN"),S=a("hGDI");const k=function(){return[5,10,20]},R=[{path:"",component:(()=>{class t{constructor(t,e,a,i,o){this._dialog=t,this._toastr=e,this._router=a,this._categoryService=i,this._datePipe=o,this.status=d.a.status,this.isLoading=!0}ngOnInit(){this.loadConfigTable(),this.loadCategories()}get total(){var t;return null===(t=this.categories)||void 0===t?void 0:t.length}loadConfigTable(){this.columns=[{header:"Fecha",field:"created_at",formatter:t=>this._datePipe.transform(t.created_at,"yyyy-dd-MM H:mm")},{header:"Nombre",field:"name"},{header:"Descripcion",field:"description"},{header:"Estado",field:"status",formatter:t=>`<span class="label">${this.status[t.status]}</span>`},{header:"Opciones",field:"option",width:"120px",pinned:"right",type:"button",buttons:[{icon:"edit",tooltip:"Modificar categoria",type:"icon",click:t=>this.editRow(t)}]}]}loadCategories(){this.categories=[],this.isLoading=!0,this._categoryService.get().subscribe(t=>{t.status&&(Array.isArray(t.data)&&(this.categories=t.data),this.isLoading=!1)})}editRow(t){const{id:e,name:a,description:i,status:o}=t;this._dialog.open(N,{width:"800px",data:{update:!0,category:{id:e,name:a,description:i,status:o}}}).afterClosed().subscribe(t=>{t&&t.status&&this.loadCategories()})}onClickAddCategory(){this._dialog.open(N,{width:"800px",data:{update:!1}}).afterClosed().subscribe(t=>{t&&t.status&&this.loadCategories()})}}return t.\u0275fac=function(e){return new(e||t)(l.Ob(c.c),l.Ob(b.b),l.Ob(U.f),l.Ob(n.a),l.Ob(i.f))},t.\u0275cmp=l.Ib({type:t,selectors:[["app-category-list"]],decls:8,vars:11,consts:[["color","primary","mat-mini-fab","",2,"margin-bottom","5px","margin-top","10px",3,"click"],[3,"data","columns","length","loading","pageOnFront","pageIndex","pageSize","pageSizeOptions"]],template:function(t,e){1&t&&(l.Pb(0,"page-header"),l.Ub(1,"mat-card"),l.Ub(2,"mat-card-title"),l.Nc(3,"Categorias de grupo"),l.Tb(),l.Ub(4,"button",0),l.bc("click",(function(){return e.onClickAddCategory()})),l.Ub(5,"mat-icon"),l.Nc(6,"add"),l.Tb(),l.Tb(),l.Pb(7,"mtx-grid",1),l.Tb()),2&t&&(l.Cb(4),l.Gb("mat-elevation-z1",!0),l.Cb(3),l.oc("data",e.categories)("columns",e.columns)("length",e.total)("loading",e.isLoading)("pageOnFront",!0)("pageIndex",0)("pageSize",5)("pageSizeOptions",l.qc(10,k)))},directives:[O.a,_.a,_.c,g.b,I.a,S.a],encapsulation:2}),t})()}];let q=(()=>{class t{}return t.\u0275mod=l.Mb({type:t}),t.\u0275inj=l.Lb({factory:function(e){return new(e||t)},imports:[[U.j.forChild(R)],U.j]}),t})(),L=(()=>{class t{}return t.\u0275mod=l.Mb({type:t}),t.\u0275inj=l.Lb({factory:function(e){return new(e||t)},providers:[i.f],imports:[[r.a,s.a,o.w,q]]}),t})()}}]);